<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<link href="style.css" rel="stylesheet">
<link href="songdata_EN.txt" id="data">
<title>アイマス楽曲Wordle -English Version-</title>
</head>
<body>
<h1 class="title"> アイマス楽曲Wordle -English Version-</h1>
<object id="songdata" data="songdata_EN.txt" type="text/plain" style="display:none"></object>
<p id="g">
  <button type="button" id="g0" onclick="startClick()">GAME START</button>
</p>
<p id="l0">
  <button type="button" id="a0">　</button>
  <button type="button" id="a1">　</button>
  <button type="button" id="a2">　</button>
  <button type="button" id="a3">　</button>
  <button type="button" id="a4">　</button>
  <button type="button" id="a5">　</button>
  <button type="button" id="a6">　</button>
  <button type="button" id="a7">　</button>
  <button type="button" id="a8">　</button>
  <button type="button" id="a9">　</button>
  <button type="button" id="a10">　</button>
  <button type="button" id="a11">　</button>
  <button type="button" id="a12">　</button>
  <button type="button" id="a13">　</button>
  <button type="button" id="a14">　</button>
  <button type="button" id="a15">　</button>
  <button type="button" id="a16">　</button>
  <button type="button" id="a17">　</button>
  <button type="button" id="a18">　</button>
  <button type="button" id="a19">　</button>
</p>
<p id="l1">
  <button type="button" id="a100">　</button>
  <button type="button" id="a101">　</button>
  <button type="button" id="a102">　</button>
  <button type="button" id="a103">　</button>
  <button type="button" id="a104">　</button>
  <button type="button" id="a105">　</button>
  <button type="button" id="a106">　</button>
  <button type="button" id="a107">　</button>
  <button type="button" id="a108">　</button>
  <button type="button" id="a109">　</button>
  <button type="button" id="a110">　</button>
  <button type="button" id="a111">　</button>
  <button type="button" id="a112">　</button>
  <button type="button" id="a113">　</button>
  <button type="button" id="a114">　</button>
  <button type="button" id="a115">　</button>
  <button type="button" id="a116">　</button>
  <button type="button" id="a117">　</button>
  <button type="button" id="a118">　</button>
  <button type="button" id="a119">　</button>
</p>
<p id="l2">
  <button type="button" id="a200">　</button>
  <button type="button" id="a201">　</button>
  <button type="button" id="a202">　</button>
  <button type="button" id="a203">　</button>
  <button type="button" id="a204">　</button>
  <button type="button" id="a205">　</button>
  <button type="button" id="a206">　</button>
  <button type="button" id="a207">　</button>
  <button type="button" id="a208">　</button>
  <button type="button" id="a209">　</button>
  <button type="button" id="a210">　</button>
  <button type="button" id="a211">　</button>
  <button type="button" id="a212">　</button>
  <button type="button" id="a213">　</button>
  <button type="button" id="a214">　</button>
  <button type="button" id="a215">　</button>
  <button type="button" id="a216">　</button>
  <button type="button" id="a217">　</button>
  <button type="button" id="a218">　</button>
  <button type="button" id="a219">　</button>
</p>
<p id="l3">
  <button type="button" id="a300">　</button>
  <button type="button" id="a301">　</button>
  <button type="button" id="a302">　</button>
  <button type="button" id="a303">　</button>
  <button type="button" id="a304">　</button>
  <button type="button" id="a305">　</button>
  <button type="button" id="a306">　</button>
  <button type="button" id="a307">　</button>
  <button type="button" id="a308">　</button>
  <button type="button" id="a309">　</button>
  <button type="button" id="a310">　</button>
  <button type="button" id="a311">　</button>
  <button type="button" id="a312">　</button>
  <button type="button" id="a313">　</button>
  <button type="button" id="a314">　</button>
  <button type="button" id="a315">　</button>
  <button type="button" id="a316">　</button>
  <button type="button" id="a317">　</button>
  <button type="button" id="a318">　</button>
  <button type="button" id="a319">　</button>
</p>
<p id="l4">
  <button type="button" id="a400">　</button>
  <button type="button" id="a401">　</button>
  <button type="button" id="a402">　</button>
  <button type="button" id="a403">　</button>
  <button type="button" id="a404">　</button>
  <button type="button" id="a405">　</button>
  <button type="button" id="a406">　</button>
  <button type="button" id="a407">　</button>
  <button type="button" id="a408">　</button>
  <button type="button" id="a409">　</button>
  <button type="button" id="a410">　</button>
  <button type="button" id="a411">　</button>
  <button type="button" id="a412">　</button>
  <button type="button" id="a413">　</button>
  <button type="button" id="a414">　</button>
  <button type="button" id="a415">　</button>
  <button type="button" id="a416">　</button>
  <button type="button" id="a417">　</button>
  <button type="button" id="a418">　</button>
  <button type="button" id="a419">　</button>
</p>
<p id="l5">
  <button type="button" id="a500">　</button>
  <button type="button" id="a501">　</button>
  <button type="button" id="a502">　</button>
  <button type="button" id="a503">　</button>
  <button type="button" id="a504">　</button>
  <button type="button" id="a505">　</button>
  <button type="button" id="a506">　</button>
  <button type="button" id="a507">　</button>
  <button type="button" id="a508">　</button>
  <button type="button" id="a509">　</button>
  <button type="button" id="a510">　</button>
  <button type="button" id="a511">　</button>
  <button type="button" id="a512">　</button>
  <button type="button" id="a513">　</button>
  <button type="button" id="a514">　</button>
  <button type="button" id="a515">　</button>
  <button type="button" id="a516">　</button>
  <button type="button" id="a517">　</button>
  <button type="button" id="a518">　</button>
  <button type="button" id="a519">　</button>
</p>
<p id="l6">
  <button type="button" id="a600">　</button>
  <button type="button" id="a601">　</button>
  <button type="button" id="a602">　</button>
  <button type="button" id="a603">　</button>
  <button type="button" id="a604">　</button>
  <button type="button" id="a605">　</button>
  <button type="button" id="a606">　</button>
  <button type="button" id="a607">　</button>
  <button type="button" id="a608">　</button>
  <button type="button" id="a609">　</button>
  <button type="button" id="a610">　</button>
  <button type="button" id="a611">　</button>
  <button type="button" id="a612">　</button>
  <button type="button" id="a613">　</button>
  <button type="button" id="a614">　</button>
  <button type="button" id="a615">　</button>
  <button type="button" id="a616">　</button>
  <button type="button" id="a617">　</button>
  <button type="button" id="a618">　</button>
  <button type="button" id="a619">　</button>
</p>
<p id="l7">
  <button type="button" id="a700">　</button>
  <button type="button" id="a701">　</button>
  <button type="button" id="a702">　</button>
  <button type="button" id="a703">　</button>
  <button type="button" id="a704">　</button>
  <button type="button" id="a705">　</button>
  <button type="button" id="a706">　</button>
  <button type="button" id="a707">　</button>
  <button type="button" id="a708">　</button>
  <button type="button" id="a709">　</button>
  <button type="button" id="a710">　</button>
  <button type="button" id="a711">　</button>
  <button type="button" id="a712">　</button>
  <button type="button" id="a713">　</button>
  <button type="button" id="a714">　</button>
  <button type="button" id="a715">　</button>
  <button type="button" id="a716">　</button>
  <button type="button" id="a717">　</button>
  <button type="button" id="a718">　</button>
  <button type="button" id="a719">　</button>
</p>
<p id="l8">
  <button type="button" id="a800">　</button>
  <button type="button" id="a801">　</button>
  <button type="button" id="a802">　</button>
  <button type="button" id="a803">　</button>
  <button type="button" id="a804">　</button>
  <button type="button" id="a805">　</button>
  <button type="button" id="a806">　</button>
  <button type="button" id="a807">　</button>
  <button type="button" id="a808">　</button>
  <button type="button" id="a809">　</button>
  <button type="button" id="a810">　</button>
  <button type="button" id="a811">　</button>
  <button type="button" id="a812">　</button>
  <button type="button" id="a813">　</button>
  <button type="button" id="a814">　</button>
  <button type="button" id="a815">　</button>
  <button type="button" id="a816">　</button>
  <button type="button" id="a817">　</button>
  <button type="button" id="a818">　</button>
  <button type="button" id="a819">　</button>
</p>
<p id="l9">
  <button type="button" id="a900">　</button>
  <button type="button" id="a901">　</button>
  <button type="button" id="a902">　</button>
  <button type="button" id="a903">　</button>
  <button type="button" id="a904">　</button>
  <button type="button" id="a905">　</button>
  <button type="button" id="a906">　</button>
  <button type="button" id="a907">　</button>
  <button type="button" id="a908">　</button>
  <button type="button" id="a909">　</button>
  <button type="button" id="a910">　</button>
  <button type="button" id="a911">　</button>
  <button type="button" id="a912">　</button>
  <button type="button" id="a913">　</button>
  <button type="button" id="a914">　</button>
  <button type="button" id="a915">　</button>
  <button type="button" id="a916">　</button>
  <button type="button" id="a917">　</button>
  <button type="button" id="a918">　</button>
  <button type="button" id="a919">　</button>
</p>
<p id="anstext"><font size="5"></font></p>
<p id="infotext"><font size="3"></font></p>
<p id="infotext2"><font size="3"></font></p>
<p>
  <button type="button" id="b0" onclick="okClick()">OK</button>
  <button type="button" id="b1" onclick="textBack()">1文字戻る</button>
</p>
<p>
  <button type="button" id="p0" onclick="buttonClick(0)">Ａ</button>
  <button type="button" id="p1" onclick="buttonClick(1)">Ｂ</button>
  <button type="button" id="p2" onclick="buttonClick(2)">Ｃ</button>
  <button type="button" id="p3" onclick="buttonClick(3)">Ｄ</button>
  <button type="button" id="p4" onclick="buttonClick(4)">Ｅ</button>
  <button type="button" id="p5" onclick="buttonClick(5)">Ｆ</button>
  <button type="button" id="p6" onclick="buttonClick(6)">Ｇ</button>
  <button type="button" id="p7" onclick="buttonClick(7)">Ｈ</button>
  <button type="button" id="p8" onclick="buttonClick(8)">Ｉ</button>
  <button type="button" id="p9" onclick="buttonClick(9)">Ｊ</button>
  <button type="button" id="p10" onclick="buttonClick(10)">Ｋ</button>
  <button type="button" id="p11" onclick="buttonClick(11)">Ｌ</button>
  <button type="button" id="p12" onclick="buttonClick(12)">Ｍ</button>
  <button type="button" id="p13" onclick="buttonClick(13)">Ｎ</button><br>

  <button type="button" id="p14" onclick="buttonClick(14)">Ｏ</button>
  <button type="button" id="p15" onclick="buttonClick(15)">Ｐ</button>
  <button type="button" id="p16" onclick="buttonClick(16)">Ｑ</button>
  <button type="button" id="p17" onclick="buttonClick(17)">Ｒ</button>
  <button type="button" id="p18" onclick="buttonClick(18)">Ｓ</button>
  <button type="button" id="p19" onclick="buttonClick(19)">Ｔ</button>
  <button type="button" id="p20" onclick="buttonClick(20)">Ｕ</button>
  <button type="button" id="p21" onclick="buttonClick(21)">Ｖ</button>
  <button type="button" id="p22" onclick="buttonClick(22)">Ｗ</button>
  <button type="button" id="p23" onclick="buttonClick(23)">Ｘ</button>
  <button type="button" id="p24" onclick="buttonClick(24)">Ｙ</button>
  <button type="button" id="p25" onclick="buttonClick(25)">Ｚ</button><br>

  <button type="button" id="p26" onclick="buttonClick(26)">０</button>
  <button type="button" id="p27" onclick="buttonClick(27)">１</button>
  <button type="button" id="p28" onclick="buttonClick(28)">２</button>
  <button type="button" id="p29" onclick="buttonClick(29)">３</button>
  <button type="button" id="p30" onclick="buttonClick(30)">４</button>
  <button type="button" id="p31" onclick="buttonClick(31)">５</button>
  <button type="button" id="p32" onclick="buttonClick(32)">６</button>
  <button type="button" id="p33" onclick="buttonClick(33)">７</button>
  <button type="button" id="p34" onclick="buttonClick(34)">８</button>
  <button type="button" id="p35" onclick="buttonClick(35)">９</button>
</p>

<p id="wrongtext">　</p>
<p><font size="1">※初めての方へ：本ゲームは作りかけです。遊ぶことはできますが色々と不便な点・融通の利かない点・誤っている点などがありますのでご了承ください。</font></p>
<p><font size="1">【最終更新：2022-05-20 it's me追加】</font></p>

<script>

var limit=20;

//let ansedtext = document.getElementById('ansedtext');

//let checkButton = document.getElementById('checkButton');
//checkButton.addEventListener('click', buttonClick);


var hiragana=["Ａ","Ｂ","Ｃ","Ｄ","Ｅ","Ｆ","Ｇ","Ｈ","Ｉ","Ｊ","Ｋ","Ｌ","Ｍ","Ｎ","Ｏ","Ｐ","Ｑ","Ｒ","Ｓ","Ｔ",
"Ｕ","Ｖ","Ｗ","Ｘ","Ｙ","Ｚ","０","１","２","３","４","５","６","７","８","９"]
var dict={}
for (let i=0;i<hiragana.length;i++){
    dict[hiragana[i]]=i;
}


/*
var songlistN=["CHEER UP! HEARTS UP!","i","WHY?","IDOL☆HEART"]
var songlistH=["CHEERUPHEARTSUP","I","WHY","IDOLHEART"]
var infolist=["1","3","5","7"]
*/
var songlistN=[];
var songlistH=[];
var infolist=[];
fetch('songdata_EN.txt')
  .then(function (response) {
     return response.text();
  })
  .then(function (mass) {
    var datas=mass.split("\n")
    var j=0;
    for (let i=0;i+2<datas.length;i=i+3){
      d1=datas[i]
      d2=datas[i+1]
      d3=datas[i+2]
      console.log(d1,d2,d3);
      if (d2.length<=limit){
        songlistN.push(d1)
        songlistH.push(d2)
        infolist.push(d3)
      }
    }
    wrongtext.innerText="対象："+String(songlistH.length)+"曲"
  });


//fr=new FileReader();


var ingame=false;
var stage=0;
var stagelimit=10;
var kaitoutext="";
var leftsong=songlistN.length;

var ansnumber=0;
var anshiragana=songlistH[ansnumber];

var colorlist=[]
for (let i=0;i<hiragana.length;i++){
    colorlist.push(0);
  }

var color_green="#00c000"
var color_yellow="#c0c000"
var color_black="#101010"
var color_basic="#888888"

var obj=document.getElementById("b0");
obj.style.backgroundColor="#3030a0";
var obj=document.getElementById("b1");
obj.style.backgroundColor="#800000";
var obj=document.getElementById("g0");
obj.style.backgroundColor="#900090";

for (let i=0;i<stagelimit;i++){
    var obj=document.getElementById("l"+String(i));
    obj.style.display="none";
  }

var obj=document.getElementById("anstext");
obj.style.display="none";
var obj=document.getElementById("infotext");
obj.style.display="none";
var obj=document.getElementById("infotext2");
obj.style.display="none";

var obj=document.getElementById("songdata");
obj.style.display="none";

function startClick(){
  ingame=true;
  stage=0;
  var obj=document.getElementById("l0");
  obj.style.display="block";
  for (let i=1;i<stagelimit;i++){
  var obj=document.getElementById("l"+String(i));
  obj.style.display="none";
  }
  var obj=document.getElementById("g");
  obj.style.display="none";
  var obj=document.getElementById("anstext");
  obj.style.display="none";
  var obj=document.getElementById("infotext");
  obj.style.display="none";
  var obj=document.getElementById("infotext2");
  obj.style.display="none";

  kaitoutext=""
  wrongtext.innerText="";

  for (let i=0;i<stagelimit;i++){
  for (let j=0;j<limit;j++){
    var buttoncode=(i*100)+j;
    var obj=document.getElementById("a"+String(buttoncode));
    obj.style.backgroundColor=color_basic;
    obj.textContent="　";
  }}
  for (let j=0;j<hiragana.length;j++){
    var obj=document.getElementById("p"+String(j));
    obj.style.backgroundColor=color_basic;
  }

  colorlist=[]
  for (let i=0;i<hiragana.length;i++){
    colorlist.push(0);
  }

  ansnumber=Math.floor(Math.random()*(songlistH.length)); //chusen
  anshiragana=songlistH[ansnumber];

}

function buttonClick(e){
  if (ingame==true){
    //const data= e.currentTarget.dataset["index"];
    var inichi = kaitoutext.length;
    if (kaitoutext.length>=limit){
      kaitoutext=kaitoutext.slice(0,-1);
      inichi--;
    }
    kaitoutext=kaitoutext+hiragana[e];
    wrongtext.innerText=kaitoutext;

    var buttoncode=(stage*100)+inichi;
    var obj=document.getElementById("a"+String(buttoncode));
    //console.log(obj.textContent)
    obj.textContent=hiragana[e]
  }
}

function okClick(){
if (kaitoutext!="" && ingame==true){
  var canuse=[];
  var rel=[];
  var seikai=true;
  for (let i=0;i<hiragana.length;i++){
    canuse.push(0);
  }
  for (let i=0;i<anshiragana.length;i++){
    canuse[dict[anshiragana.charAt(i)]]++;
  }
  for (let i=0;i<limit;i++){
    if (kaitoutext.length<=i){
      if (anshiragana.length<=i){
        rel.push(2);
      }else{
        seikai=false;
        rel.push(-1);
      }
    }else{
      if (anshiragana.length<=i){
        seikai=false;
        rel.push(0);
      }else{
        if (kaitoutext.charAt(i)==anshiragana.charAt(i)){
          rel.push(2);
          canuse[dict[kaitoutext.charAt(i)]]--;
        }else{
          seikai=false;
          rel.push(0);
        }
      }
    }
  }
  for (let i=0;i<limit;i++){
    if (rel[i]==0){
      if (canuse[dict[kaitoutext.charAt(i)]]>0){
        canuse[dict[kaitoutext.charAt(i)]]--;
        rel[i]=1
      }
    }
  }

  for (let i=0;i<limit;i++){
    if (rel[i]>-2){
      var buttoncode=(stage*100)+i;
      var obj=document.getElementById("a"+String(buttoncode));
      //Sconsole.log(obj.textContent)
      if (rel[i]==2){
        obj.style.backgroundColor=color_green;
        colorlist[dict[kaitoutext.charAt(i)]]=2
      }else if(rel[i]==1){
        obj.style.backgroundColor=color_yellow;
        if (colorlist[dict[kaitoutext.charAt(i)]]<1){
          colorlist[dict[kaitoutext.charAt(i)]]=1
        }
      }else{
        obj.style.backgroundColor=color_black;
        if (colorlist[dict[kaitoutext.charAt(i)]]<1){
          colorlist[dict[kaitoutext.charAt(i)]]=-1
        }
      }
      
    }
  }
  for (let i=0;i<hiragana.length;i++){
    if(colorlist[i]==2){
      var obj=document.getElementById("p"+String(i));
      obj.style.backgroundColor=color_green;
    }else if(colorlist[i]==1){
      var obj=document.getElementById("p"+String(i));
      obj.style.backgroundColor=color_yellow;
    }else if(colorlist[i]==-1){
      var obj=document.getElementById("p"+String(i));
      obj.style.backgroundColor=color_black;
    }
  }

  console.log(String(rel))
  
  kaitoutext="";
  if(stage+1<stagelimit && seikai==false){
    stage++;
    var obj=document.getElementById("l"+String(stage));
    obj.style.display="block";
    wrongtext.innerText="";
  }else{
    ingame=false;
    var obj=document.getElementById("anstext");
    obj.textContent="正解：「"+songlistN[ansnumber]+"」";
    obj.style.display="block";
    var obj=document.getElementById("infotext");
    obj.textContent=songlistH[ansnumber];
    obj.style.display="block";
    var obj=document.getElementById("infotext2");
    obj.textContent=infolist[ansnumber];
    obj.style.display="block";
    var obj=document.getElementById("g");
    obj.style.display="block";
  }

}

}

function textBack(){
  
  if (kaitoutext.length>0 && ingame==true){
      var inichi = kaitoutext.length-1;
      kaitoutext=kaitoutext.slice(0,-1)
      var buttoncode=(stage*100)+inichi;
      var obj=document.getElementById("a"+String(buttoncode));
      //Sconsole.log(obj.textContent)
      obj.textContent="　"
    }
    wrongtext.innerText=kaitoutext;
}


</script>

</body>
</html>
